<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ME 405 Romi Term Project: LidarSensor.LidarSensor Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">ME 405 Romi Term Project
   </div>
   <div id="projectbrief">The source code for the Romi term project in ME 405, Mechatronics, Fall 2023.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('class_lidar_sensor_1_1_lidar_sensor.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="class_lidar_sensor_1_1_lidar_sensor-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">LidarSensor.LidarSensor Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Romi LIDAR distance sensor firmware class.  
 <a href="class_lidar_sensor_1_1_lidar_sensor.html#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:adbd28dead79c2a50d53365f18b4b443f" id="r_adbd28dead79c2a50d53365f18b4b443f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_lidar_sensor_1_1_lidar_sensor.html#adbd28dead79c2a50d53365f18b4b443f">__init__</a> (self, LidarShares)</td></tr>
<tr class="memdesc:adbd28dead79c2a50d53365f18b4b443f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes and returns an object associated with a Romi <a class="el" href="namespace_lidar_sensor.html">LidarSensor</a>.  <br /></td></tr>
<tr class="separator:adbd28dead79c2a50d53365f18b4b443f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a68d9db52cb027babd6627b4af6a56db1" id="r_a68d9db52cb027babd6627b4af6a56db1"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_lidar_sensor_1_1_lidar_sensor.html#a68d9db52cb027babd6627b4af6a56db1">getDistance</a> (self)</td></tr>
<tr class="memdesc:a68d9db52cb027babd6627b4af6a56db1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper function that measures the distance sensed by the LIDAR sensor.  <br /></td></tr>
<tr class="separator:a68d9db52cb027babd6627b4af6a56db1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c1f6b14d8321b2693124b9eeb955b02" id="r_a2c1f6b14d8321b2693124b9eeb955b02"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_lidar_sensor_1_1_lidar_sensor.html#a2c1f6b14d8321b2693124b9eeb955b02">MainTask</a> (self)</td></tr>
<tr class="memdesc:a2c1f6b14d8321b2693124b9eeb955b02"><td class="mdescLeft">&#160;</td><td class="mdescRight">Main cotask task for <a class="el" href="namespace_lidar_sensor.html">LidarSensor</a>.  <br /></td></tr>
<tr class="separator:a2c1f6b14d8321b2693124b9eeb955b02"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-attribs" name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:aaa78e97989a88f138c2209d23433bede" id="r_aaa78e97989a88f138c2209d23433bede"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_lidar_sensor_1_1_lidar_sensor.html#aaa78e97989a88f138c2209d23433bede">distance</a></td></tr>
<tr class="separator:aaa78e97989a88f138c2209d23433bede"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afcdefb09ff9326dd3cad30319b6dc4a3" id="r_afcdefb09ff9326dd3cad30319b6dc4a3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_lidar_sensor_1_1_lidar_sensor.html#afcdefb09ff9326dd3cad30319b6dc4a3">dt</a></td></tr>
<tr class="separator:afcdefb09ff9326dd3cad30319b6dc4a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1640ff13ba9ed5c9429a98ee34eda45c" id="r_a1640ff13ba9ed5c9429a98ee34eda45c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_lidar_sensor_1_1_lidar_sensor.html#a1640ff13ba9ed5c9429a98ee34eda45c">d_calc</a></td></tr>
<tr class="separator:a1640ff13ba9ed5c9429a98ee34eda45c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Romi LIDAR distance sensor firmware class. </p>
<p><a class="el" href="_lidar_sensor_8py.html" title="Romi LIDAR distance sensor firmware.">LidarSensor.py</a> contains the class driver for the Pololu (item # 4064) LIDAR -based distance sensor. Because of the way interrupts work on the STM32 with MicroPython, the interrupt that is used to actually measure the pulse width of the sensor output is in Romi's '<a class="el" href="main_8py.html" title="Romi main file.">main.py</a>' and runs on rising and falling edges. The pulse width is pushed to a Share during the ISR. Like all of Romi's firmware, it initializes with a set of Shares designed to pass important data in and out to the rest of Romi's program.</p>
<p><a class="el" href="namespace_lidar_sensor.html">LidarSensor</a> creates an object that runs regularly with Romi's multitasking. It works with the pulse width measurement ISR to constantly update the distance measurement Share. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="adbd28dead79c2a50d53365f18b4b443f" name="adbd28dead79c2a50d53365f18b4b443f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adbd28dead79c2a50d53365f18b4b443f">&#9670;&#160;</a></span>__init__()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">LidarSensor.LidarSensor.__init__ </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>LidarShares</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes and returns an object associated with a Romi <a class="el" href="namespace_lidar_sensor.html">LidarSensor</a>. </p>
<p>Unpacks Shares and initializes variables. </p><pre class="fragment">    LidarShares contains two Shares. They are used to pass data around Romi's main program.
    LidarShares[0] = distance       [mm]    (float)
    LidarShares[1] = pulse width    [us]    (float)
</pre> <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">LidarShares</td><td>A tuple containing all of <a class="el" href="namespace_lidar_sensor.html">LidarSensor</a>'s Shares objects. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a68d9db52cb027babd6627b4af6a56db1" name="a68d9db52cb027babd6627b4af6a56db1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a68d9db52cb027babd6627b4af6a56db1">&#9670;&#160;</a></span>getDistance()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">LidarSensor.LidarSensor.getDistance </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Helper function that measures the distance sensed by the LIDAR sensor. </p>
<p>TThe returned distance is in millimeters. The calculation can be found in Pololu's documentation for the sensor on their website (item # 4064). </p>

</div>
</div>
<a id="a2c1f6b14d8321b2693124b9eeb955b02" name="a2c1f6b14d8321b2693124b9eeb955b02"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2c1f6b14d8321b2693124b9eeb955b02">&#9670;&#160;</a></span>MainTask()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">LidarSensor.LidarSensor.MainTask </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Main cotask task for <a class="el" href="namespace_lidar_sensor.html">LidarSensor</a>. </p>
<p>The <a class="el" href="namespace_lidar_sensor.html">LidarSensor</a> main task has states: </p><pre class="fragment">    1:  Normal operation state. Continuously compute distance and push the
        current measurement to the distance Share.
</pre><p>Like all of Romi's cooperative multitasking tasks, MainTask is written as a generator function with an infinite loop. Each pass through the program runs through the MainTask while loop once, until it reaches a yield. </p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a1640ff13ba9ed5c9429a98ee34eda45c" name="a1640ff13ba9ed5c9429a98ee34eda45c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1640ff13ba9ed5c9429a98ee34eda45c">&#9670;&#160;</a></span>d_calc</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">LidarSensor.LidarSensor.d_calc</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="aaa78e97989a88f138c2209d23433bede" name="aaa78e97989a88f138c2209d23433bede"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa78e97989a88f138c2209d23433bede">&#9670;&#160;</a></span>distance</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">LidarSensor.LidarSensor.distance</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="afcdefb09ff9326dd3cad30319b6dc4a3" name="afcdefb09ff9326dd3cad30319b6dc4a3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afcdefb09ff9326dd3cad30319b6dc4a3">&#9670;&#160;</a></span>dt</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">LidarSensor.LidarSensor.dt</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>PYBFLASH/<a class="el" href="_lidar_sensor_8py.html">LidarSensor.py</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespace_lidar_sensor.html">LidarSensor</a></li><li class="navelem"><a class="el" href="class_lidar_sensor_1_1_lidar_sensor.html">LidarSensor</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
